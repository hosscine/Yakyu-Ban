<!DOCTYPE html>
<html>

<head>
	<title>EaselJS demo: Inheritance</title>
	<script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
	<script src="Ground.js"></script>
	<script src="Ball.js"></script>
	<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />

	<script>
		let stage // 絶対init内でinitizalizeする
		let ball

		function init() {

			let queue = new createjs.LoadQueue(false)
			queue.addEventListener("fileload", handleFileLoad)
			queue.addEventListener("complete", handleComplete)
			queue.loadFile("assets/ball.png")

			stage = new createjs.Stage("Canvas")
			stage.addEventListener("stagemousedown", function(event) {
				ball.throw(250, 250, 250, 600)
			})
			createjs.Ticker.addEventListener("tick", stage)

			let ground = stage.addChild(new Ground())
			ground.x = 250
			ground.y = 450
			ground.scaleX = ground.scaleY = 0.7

			stage.update()
		}

		function handleFileLoad(event) {
			let bitmap = new createjs.Bitmap(event.result) //Bitmapに変換する
			ball = stage.addChild(new Ball(bitmap))
		}

		function handleComplete(event) {
			stage.update() //complete後にupdateする
		}
	</script>
</head>

<body onload="init();">
	<canvas id="Canvas" width="500" height="500">
		alternate content
	</canvas>
</body>

</html>
